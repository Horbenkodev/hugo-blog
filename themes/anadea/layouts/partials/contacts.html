<section class="contacts">
  <div class="contacts__content">
    <div>
      <svg class="contacts__logo" width="68" height="54" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M33.794 0 0 11.977v20.688l33.794-11.977 33.795 11.977V11.977L33.794 0ZM0 53.687 3.112 46h1.472l3.112 7.687h-1.67l-.664-1.712h-3.07l-.663 1.712H0Zm3.827-5.672-.965 2.474h1.93l-.965-2.474ZM17.985 50.732 14.506 46H13v7.687h1.612v-4.889l3.596 4.889h1.389V46h-1.612v4.732ZM25 53.687 28.11 46h1.475l3.11 7.687h-1.668l-.665-1.712h-3.07l-.663 1.712H25Zm3.826-5.672-.963 2.474h1.928l-.965-2.474ZM37 46h2.792c2.25 0 3.804 1.659 3.804 3.842 0 2.164-1.554 3.845-3.804 3.845H37V46Zm1.573 6.16h1.219c1.29 0 2.158-.934 2.158-2.318 0-1.36-.869-2.317-2.158-2.317h-1.219v4.634ZM50.578 50.568h3.402v-1.503h-3.402v-1.56h3.867V46H49v7.687h5.497v-1.504h-3.919v-1.615ZM63.113 46h1.472l3.11 7.687h-1.667l-.666-1.712h-3.068l-.666 1.712H60L63.113 46Zm.713 2.014-.963 2.475h1.927l-.964-2.474Z"
          fill="#fff"
        />
      </svg>
      <h2 class="contacts__title">Contact us</h2>
      <p class="contacts__paragraph">
        Whether youâ€™re looking to build an MVP, create a web design for your site, develop a mobile app or complex IT
        system - tell us about your project. We will give you a quote and advice.
      </p>
    </div>
  </div>
  <div class="contacts__formBlock">
    <form class="contacts__form" id="form" data-type="json" enctype="multipart/form-data" action="anadea.info/contacts" accept-charset="UTF-8" method="post">
      <input
      type="hidden"
      name="contact_type"
      id="bottom_section_contact_type"
      value="contact_form"
      autocomplete="off"
    />
    <input
      type="hidden"
      name="form_type"
      id="bottom_section_form_type"
      value="redesigned_contact_form"
      autocomplete="off"
    />
    <input
      type="hidden"
      name="guid"
      id="bottom_section_guid"
      value="GA1.1.1857433846.1718106450"
      autocomplete="off"
    />
    <input
      type="hidden"
      name="authenticity_token"
      id="authenticity_token"
      value="VXQrZ-GDk8xTXcoI-8HaSkGfSTB-bxNxvNVcim_oqAQcbkdOQFpOYOst1zlqHjUpJkyLd9VJSoGpQMtYA0ab1g"
      autocomplete="off"
    />
      <div class="contacts__item">
        <label for="name">Your name*</label>
        <input class="contacts__input" id="name" required="required" aria-required="true" type="text" name="contact_form[name]" />
      </div>
      <div class="contacts__item">
        <label for="email">Your E-mail*</label>
        <input class="contacts__input" id="email" required="required" aria-required="true" type="email" name="contact_form[email]" />
      </div>
      <div class="contacts__item">
        <label for="phone">Phone number</label>
        <input class="contacts__input" id="phone" name="contact_form[phone]" type="tel" />
      </div>
      <textarea class="contacts__item contacts__textarea" placeholder="Description*" minlength="20" required="required" aria-required="true" name="contact_form[message]"></textarea>
      <label class="contacts__label contacts__label--attach" id="file-label" for="file">Attach file</label>
      <input class="contacts__file" id="file" multiple="multiple" data-size="500" type="file" name="contact_form[attachments][]" onchange="handleFileInputChange(event)" />
      <div class="contacts__subscribe">
        <input name="contact_form[subscribe]" type="hidden" value="0" autocomplete="off" />
        <input class="contacts__checkbox" type="checkbox" name="contact_form[subscribe]" value="1" id="subscribe" checked />
        <label for="subscribe">Sign me up to newsletter - Useful insights only and frequency just right.</label>
      </div>
      <button class="contacts__submit" type="submit" data-disable-with="Sending...">Send</button>
    </form>
  </div>
</section>

<script>
  function truncateText(text, maxLength) {
    if (text.length > maxLength) {
      return text.substring(0, maxLength) + '...';
    }
    return text;
  }

  document.getElementById('file').addEventListener('change', function(event) {
    const fileLabel = document.getElementById('file-label');
    const fileName = event.target.files[0].name;
    fileLabel.textContent = truncateText(fileName, 20);
  });

  function handleFileInputChange(event) {
    const label = document.querySelector('.contacts__label');

    if (event.target.files.length > 0) {
      label.textContent = `${event.target.files[0].name}`;
    } else {
      label.textContent = 'Attach file';
    }
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(this);

    uploadMultiple(formData);
  }

function uploadMultiple(formData) {
  fetch("https://anadea.info/webhooks/b2b_anadea/some_cool_token", {
      method: "POST",
      body: formData,
    }).then(response => {
      return response.json()
    }).then(result => {
      console.log(result)
    })
}

document.getElementById('form').addEventListener('submit', handleSubmit)



</script>

